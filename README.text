# WhatsApp API System

A Django system for sending WhatsApp messages with client management, contacts, message queue, and API key authentication.

## âœ¨ Main Features

- Client management with unique API keys  
- Contact management for each client  
- Scheduled WhatsApp message sending via `pywhatkit`  
- Message queue system for managing outgoing messages  
- REST API for sending messages with authentication  
- Management command to process and send queued messages  

---

## Models Structure

### `Client`  
Stores information about each client in the system.  
| Field        | Type         | Description        |  
|--------------|--------------|--------------------|  
| `client_name`| `CharField`  | Client's name      |  
| `api_key`    | `CharField`  | Unique API key     |  

---

### `Contact`  
Represents a contact of a client.  
| Field     | Type         | Description                 |  
|-----------|--------------|-----------------------------|  
| `client`  | ForeignKey   | The client this contact belongs to |  
| `name`    | CharField    | Contact's name               |  
| `phone`   | CharField    | Phone number                 |  

---

### `MessageQueue`  
Stores messages that are pending or have been sent.  
| Field         | Type            | Description                                      |  
|---------------|-----------------|-------------------------------------------------|  
| `client`      | ForeignKey      | The sending client                               |  
| `contact`     | ForeignKey      | The receiving contact                            |  
| `text`        | TextField       | Message content                                 |  
| `status`      | CharField       | Message status: `pending`, `sent`, `failed`    |  
| `error_reason`| TextField (null)| Reason for failure, if any                       |  
| `created_at`  | DateTime       | Message creation timestamp                        |  
| `sent_at`     | DateTime (null)| Actual sending timestamp                          |  

---

## ğŸ”Œ REST API

### `POST /send-message/`

Sends a message by adding it to the queue.

#### Request:

```json
{
  client_name: "infinity"
  "api_key": "123456",
  "phone": "+972501234567",
  "name": "Dani",
}

'whatsapp_api/ 
â”œâ”€â”€ manage.py
â”œâ”€â”€ whatsapp_api/           
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ settings.py
â”‚   â”œâ”€â”€ urls.py
|   â”œâ”€â”€ asgi.py
â”‚   â””â”€â”€ wsgi.py
â”‚
â””â”€â”€ whatsapp_app/               
    â”œâ”€â”€ __init__.py
    â”œâ”€â”€ admin.py
    â”œâ”€â”€ apps.py
    â”œâ”€â”€ models.py               # â† Client, Contact, MessageQueue
    â”œâ”€â”€ serializers.py          
    â”œâ”€â”€ views.py 
    â”œâ”€â”€ tests.py               
    â”œâ”€â”€ urls.py                                
    â””â”€â”€ management/
        â””â”€â”€ commands/
            â””â”€â”€ process_queue.py 